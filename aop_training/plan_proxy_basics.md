# Phase 1: í”„ë¡ì‹œ ê¸°ì´ˆ í•™ìŠµ

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- JDK ë™ì  í”„ë¡ì‹œì™€ CGLIB í”„ë¡ì‹œì˜ ê¸°ë³¸ ì›ë¦¬ ì´í•´
- ë‘ ë°©ì‹ì˜ ì°¨ì´ì ê³¼ ì¥ë‹¨ì  ë¹„êµ
- ì‹¤ì œ ì½”ë“œë¡œ í”„ë¡ì‹œ ìƒì„±ê³¼ ë™ì‘ ê³¼ì • ì²´í—˜

## ğŸ“š ì´ë¡  í•™ìŠµ ë‚´ìš©

### 1. í”„ë¡ì‹œ íŒ¨í„´ ê¸°ì´ˆ

- í”„ë¡ì‹œ íŒ¨í„´ì˜ ê°œë…ê³¼ ëª©ì 
  - ëŒ€ë¦¬ì¸ ê°ì²´(Proxy ê°ì²´)ë¥¼ í†µí•´ **ì‹¤ì œ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼**ì„ ì œì–´í•œë‹¤.
  - ì›ë³¸ ê°ì²´ì˜ í˜¸ì¶œì˜ ê²°ê³¼ ê°’ ë“±ì„ ì§ì ‘ì ìœ¼ë¡œ 'ë³€ê²½'í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - ì£¼ìš” ì˜ˆì‹œ: ì¸ì¦/ì¸ê°€ í™•ì¸, lazy loading,  ìºì‹±, ë¡œê¹…, íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë“±
- ì •ì  í”„ë¡ì‹œ vs ë™ì  í”„ë¡ì‹œ
  - **ì •ì  í”„ë¡ì‹œ**
    - ì»´íŒŒì¼ ì‹œì ì— í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‘ì„±í•˜ê±°ë‚˜ ì½”ë“œ ìƒì„±ë„êµ¬ë¡œ ë§Œë“¤ì–´ë‘”ë‹¤.
    - í”„ë¡ì‹œì™€ ì›ë³¸ì´ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.
    - ì¥ì  : êµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ê³  ë™ì‘ì— ëŒ€í•œ ì˜ˆì¸¡ì´ ì‰½ë‹¤. ì½”ë“œë ˆë²¨ì—ì„œ ì§ì ‘ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ëª…í™•í•˜ê²Œ íŒŒì•…ì´ ê°€ëŠ¥í•˜ë‹¤.
    - ë‹¨ì  : ë™ì¼í•œ íš¡ë‹¨ ê´€ì‹¬ì‚¬(ë¡œê¹… ë“±)ë¥¼ ì—¬ëŸ¬ í´ë˜ìŠ¤ì— ì ìš©í•˜ë ¤ë©´ ê°ê°ì˜ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì›ë³¸ í´ë˜ìŠ¤ ë§ˆë‹¤ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
  - **ë™ì  í”„ë¡ì‹œ**
    - `ëŸ°íƒ€ì„ ì‹œì `ì— ë¦¬í”Œë ‰ì…˜, ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ì„ í†µí•´ **í”„ë¡ì‹œ ê°ì²´ë¥¼ ìë™ ìƒì„±**í•œë‹¤.
    - JDK ë™ì  í”„ë¡ì‹œ : ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜
    - CGLIB í”„ë¡ì‹œ : í´ë˜ìŠ¤ ìƒì† ê¸°ë°˜
    - ì¥ì : í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‘ì„±í•  í•„ìš”ê°€ ì—†ê³ , ì—¬ëŸ¬ í´ë˜ìŠ¤ì— ë™ì¼í•œ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤.
    - ë‹¨ì : ë¦¬í”Œë ‰ì…˜/ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ì— ë”°ë¼ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ê³ , ë””ë²„ê¹…ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.

- í”„ë¡ì‹œê°€ í•´ê²°í•˜ëŠ” ëŒ€í‘œì ì¸ ë¬¸ì œë“¤
  - ë¡œê¹…/ëª¨ë‹ˆí„°ë§ â†’ ë©”ì†Œë“œ í˜¸ì¶œ ì‹œê°„ ì¸¡ì •, í˜¸ì¶œ íšŸìˆ˜ ë¡œê¹…
  - íŠ¸ëœì­ì…˜ ê´€ë¦¬ â†’ ë©”ì†Œë“œ ì‹¤í–‰ ì „/í›„ì— íŠ¸ëœì­ì…˜ ì—´ê³  ë‹«ê¸°
  - ë³´ì•ˆ/ê¶Œí•œ ì œì–´ â†’ ì ‘ê·¼ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš° ì°¨ë‹¨
  - ì§€ì—° ë¡œë”© (Lazy Loading) â†’ ì‹¤ì œ ê°ì²´ í•„ìš”í•  ë•Œ ìƒì„±
  - ìºì‹± â†’ ë™ì¼ ìš”ì²­ ê²°ê³¼ë¥¼ ìºì‹œì—ì„œ ë°˜í™˜

### 2. JDK ë™ì  í”„ë¡ì‹œ

- InvocationHandler ì¸í„°í˜ì´ìŠ¤
- Proxy.newProxyInstance() ë©”ì†Œë“œ
- ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œì˜ íŠ¹ì§•ê³¼ ì œí•œì‚¬í•­
  - ì‹¤ì œ ê°ì²´ì™€ í”„ë¡ì‹œê°€ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê³µí†µì˜ ì¸í„°í˜ì´ìŠ¤ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.
  - `InvocationHandler`ë¥¼ í™œìš©í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ `InvocationHandler.invoke(proxy, method, args)`ë¡œ ìœ„ì„ëœë‹¤.
  - ê°œë°œìëŠ” ì´ ë©”ì„œë“œ ì•ˆì—ì„œ ë¶€ê°€ê¸°ëŠ¥ì„ ë„£ê±°ë‚˜ ì›ë³¸ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ `method.invoke(target, args)`ë¡œ í˜¸ì¶œí•œë‹¤.
  - JDK í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬í•¨ë˜ê¸° ë•Œë¬¸ì— ë³„ë„ ì˜ì¡´ì„±ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.
  - Reflaction API ê¸°ë°˜ì´ë‹¤.
  - Spring AOPëŠ” ëŒ€ìƒ Beanì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê²½ìš°ì—ëŠ” JDK ë™ì  í”„ë¡ì‹œë¥¼ ìš°ì„ ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

### 3. CGLIB í”„ë¡ì‹œ

- ìƒì† ê¸°ë°˜ í”„ë¡ì‹œ ìƒì„±
- MethodInterceptor ì¸í„°í˜ì´ìŠ¤
- í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œì˜ íŠ¹ì§•ê³¼ ì œí•œì‚¬í•­
  - CGLIBëŠ” `ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì¡°ì‘`í•´ì„œ ëŒ€ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†í•œ ì„œë¸Œí´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.
  - ì¸í„°í˜ì´ìŠ¤ ì—†ì´ë„ í”„ë¡ì‹œ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. -> ê°œë°œìê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ ë‘˜ í•„ìš”ê°€ ì—†ë‹¤.
  - í´ë¼ì´ì–¸íŠ¸ê°€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ `MethodInterceptor.intercept(obj, method, args, proxy)`ë¡œ ìœ„ì„ëœë‹¤.
  - `proxy.invokeSuper(obj, args)`ë¥¼ í˜¸ì¶œí•˜ë©´ ì›ë³¸ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.
  - Spring AOPëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì„ ë•Œ CGLIBë¥¼ ì´ìš©í•´ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
  - Hibernate, Spring, Mockito ê°™ì€ ê³³ì—ì„œ ì—”í‹°í‹°/ë¹ˆ ë“±ì˜ ê°ì²´ í”„ë¡ì‹œ ìƒì„±ì— í™œìš©í•œë‹¤.

## ğŸ›  ì‹¤ìŠµ ê³¼ì œ

### ê³¼ì œ 1: JDK ë™ì  í”„ë¡ì‹œ êµ¬í˜„

**íŒŒì¼ ìœ„ì¹˜**: `src/main/kotlin/bong/training/phase1/jdk/`

#### 1-1. ê¸°ë³¸ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ ë° êµ¬í˜„ì²´

```kotlin
// UserService.kt - ì¸í„°í˜ì´ìŠ¤
interface UserService {
    fun findUser(id: Long): String
    fun saveUser(name: String): Long
    fun deleteUser(id: Long): Boolean
}

// UserServiceImpl.kt - êµ¬í˜„ì²´
class UserServiceImpl : UserService {
    override fun findUser(id: Long): String = "User-$id"
    override fun saveUser(name: String): Long = System.currentTimeMillis()
    override fun deleteUser(id: Long): Boolean = true
}
```

#### 1-2. JDK ë™ì  í”„ë¡ì‹œ êµ¬í˜„

```kotlin
// LoggingInvocationHandler.kt
class LoggingInvocationHandler(private val target: Any) : InvocationHandler {
    override fun invoke(proxy: Any?, method: Method, args: Array<out Any>?): Any? {
        // ë©”ì†Œë“œ ì‹¤í–‰ ì „ ë¡œê·¸
        // ë©”ì†Œë“œ ì‹¤í–‰
        // ë©”ì†Œë“œ ì‹¤í–‰ í›„ ë¡œê·¸
        // ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
    }
}

// ProxyFactory.kt
class JdkProxyFactory {
    companion object {
        fun <T> createProxy(target: T, targetClass: Class<T>): T {
            // Proxy.newProxyInstance() ì‚¬ìš©
        }
    }
}
```

### ê³¼ì œ 2: CGLIB í”„ë¡ì‹œ êµ¬í˜„

**íŒŒì¼ ìœ„ì¹˜**: `src/main/kotlin/bong/training/phase1/cglib/`

#### 2-1. CGLIBìš© ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ (ì¸í„°í˜ì´ìŠ¤ ì—†ìŒ)

```kotlin
// OrderService.kt - êµ¬ì²´ í´ë˜ìŠ¤
open class OrderService {
    open fun createOrder(productId: Long, quantity: Int): String {
        return "Order created: product=$productId, qty=$quantity"
    }
  
    open fun cancelOrder(orderId: String): Boolean {
        return true
    }
}
```

#### 2-2. CGLIB í”„ë¡ì‹œ êµ¬í˜„

```kotlin
// LoggingMethodInterceptor.kt
class LoggingMethodInterceptor(private val target: Any) : MethodInterceptor {
    override fun intercept(obj: Any?, method: Method?, args: Array<out Any>?, proxy: MethodProxy?): Any? {
        // ë©”ì†Œë“œ ì‹¤í–‰ ì „ ì²˜ë¦¬
        // proxy.invokeSuper() ë˜ëŠ” method.invoke() ì‚¬ìš©
        // ë©”ì†Œë“œ ì‹¤í–‰ í›„ ì²˜ë¦¬
    }
}

// CglibProxyFactory.kt
class CglibProxyFactory {
    companion object {
        fun <T> createProxy(targetClass: Class<T>): T {
            // Enhancer ì‚¬ìš©í•˜ì—¬ í”„ë¡ì‹œ ìƒì„±
        }
    }
}
```

### ê³¼ì œ 3: í”„ë¡ì‹œ ë¹„êµ ë° ë¶„ì„

**íŒŒì¼ ìœ„ì¹˜**: `src/main/kotlin/bong/training/phase1/comparison/`

```kotlin
// ProxyComparison.kt
class ProxyComparison {
    fun compareProxyTypes() {
        // JDK vs CGLIB ì„±ëŠ¥ ë¹„êµ
        // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¹„êµ
        // ì œì•½ì‚¬í•­ ë¹„êµ
    }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜

- `src/test/kotlin/bong/training/phase1/`

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### 1. JDK ë™ì  í”„ë¡ì‹œ í…ŒìŠ¤íŠ¸

```kotlin
// JdkProxyTest.kt
class JdkProxyTest {
    @Test
    fun `JDK í”„ë¡ì‹œ ìƒì„± ë° ë©”ì†Œë“œ í˜¸ì¶œ í…ŒìŠ¤íŠ¸`()
  
    @Test
    fun `ë¡œê¹… ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸`()
  
    @Test
    fun `ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ê¸°ëŠ¥ í™•ì¸`()
  
    @Test
    fun `ì˜ˆì™¸ ë°œìƒ ì‹œ í”„ë¡ì‹œ ë™ì‘ í™•ì¸`()
}
```

#### 2. CGLIB í”„ë¡ì‹œ í…ŒìŠ¤íŠ¸

```kotlin
// CglibProxyTest.kt
class CglibProxyTest {
    @Test
    fun `CGLIB í”„ë¡ì‹œ ìƒì„± ë° ë©”ì†Œë“œ í˜¸ì¶œ í…ŒìŠ¤íŠ¸`()
  
    @Test
    fun `final ë©”ì†Œë“œ ì²˜ë¦¬ í™•ì¸`()
  
    @Test
    fun `ìƒì„±ì ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” í´ë˜ìŠ¤ í”„ë¡ì‹œ ìƒì„±`()
}
```

#### 3. í”„ë¡ì‹œ ë¹„êµ í…ŒìŠ¤íŠ¸

```kotlin
// ProxyComparisonTest.kt
class ProxyComparisonTest {
    @Test
    fun `JDK vs CGLIB ì„±ëŠ¥ ë¹„êµ`()
  
    @Test
    fun `ì¸í„°í˜ì´ìŠ¤ ìœ ë¬´ì— ë”°ë¥¸ í”„ë¡ì‹œ ì„ íƒ`()
  
    @Test
    fun `í”„ë¡ì‹œ ìƒì„± ì‹œê°„ ë¹„êµ`()
}
```

## ğŸ“Š í•™ìŠµ ê²°ê³¼ ë¶„ì„

### ë¶„ì„ í•­ëª©

1. **ì„±ëŠ¥ ë¹„êµ**

   - í”„ë¡ì‹œ ìƒì„± ì‹œê°„
   - ë©”ì†Œë“œ í˜¸ì¶œ ì˜¤ë²„í—¤ë“œ
   - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
2. **ì œì•½ì‚¬í•­ ë¶„ì„**

   - JDK í”„ë¡ì‹œ: ì¸í„°í˜ì´ìŠ¤ í•„ìˆ˜
   - CGLIB: final í´ë˜ìŠ¤/ë©”ì†Œë“œ ì œí•œ
   - ìƒì„±ì ë§¤ê°œë³€ìˆ˜ ì²˜ë¦¬
3. **ì‚¬ìš© ì‹œì  ê²°ì • ê¸°ì¤€**

   - ì–¸ì œ JDK í”„ë¡ì‹œë¥¼ ì‚¬ìš©í• ì§€
   - ì–¸ì œ CGLIB í”„ë¡ì‹œë¥¼ ì‚¬ìš©í• ì§€
   - ìŠ¤í”„ë§ì´ ì„ íƒí•˜ëŠ” ê¸°ì¤€

## ğŸ“ í•™ìŠµ ì™„ë£Œ ê¸°ì¤€

### ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ]  JDK ë™ì  í”„ë¡ì‹œ êµ¬í˜„ ì™„ë£Œ
- [ ]  CGLIB í”„ë¡ì‹œ êµ¬í˜„ ì™„ë£Œ
- [ ]  ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³¼
- [ ]  ì„±ëŠ¥ ë¹„êµ ë¶„ì„ ì™„ë£Œ
- [ ]  ë‘ ë°©ì‹ì˜ ì°¨ì´ì  ëª…í™•íˆ ì´í•´
- [ ]  ì‹¤ì œ í”„ë¡ì‹œ ê°ì²´ ë””ë²„ê¹…ìœ¼ë¡œ ë‚´ë¶€ êµ¬ì¡° í™•ì¸

### ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„

- ìŠ¤í”„ë§ AOP ì–´ë…¸í…Œì´ì…˜ í•™ìŠµ ì¤€ë¹„
- Aspect, Advice ê°œë… ì˜ˆìŠµ
- í”„ë¡ì‹œ ê¸°ë°˜ AOP ë™ì‘ ì›ë¦¬ ì—°ê²°ê³ ë¦¬ íŒŒì•…

---

*ì˜ˆìƒ ì†Œìš” ì‹œê°„: 3-4ì¼*
*ë‚œì´ë„: â­â­â˜†â˜†â˜†*
